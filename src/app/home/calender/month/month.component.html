<div class="calendar-header">
  <ion-row class="calendar-month">
    <ion-col class="arrow_box" (click)="goToLastMonth()">
      <ion-icon name="arrow-back"></ion-icon>
    </ion-col>
    <ion-col class="month_box">
      <ion-label>{{currentMonth}} {{currentYear}}</ion-label>
    </ion-col>
    <ion-col class="arrow_box" (click)="goToNextMonth()">
      <ion-icon name="arrow-forward"></ion-icon>
    </ion-col>
  </ion-row>
</div>

<div class="calendar-body">
  <ion-grid>
    <ion-row class="calendar-weekday">
      <ion-col class="calendar_heading">
        <ion-label>S</ion-label>
      </ion-col>
      <ion-col class="calendar_heading">
        <ion-label>M</ion-label>
      </ion-col>
      <ion-col class="calendar_heading">
        <ion-label>T</ion-label>
      </ion-col>
      <ion-col class="calendar_heading">
        <ion-label>W</ion-label>
      </ion-col>
      <ion-col class="calendar_heading">
        <ion-label>T</ion-label>
      </ion-col>
      <ion-col class="calendar_heading">
        <ion-label>F</ion-label>
      </ion-col>
      <ion-col class="calendar_heading">
        <ion-label>S</ion-label>
      </ion-col>
    </ion-row>

    <ion-row class="calendar-date">
      <ion-col col-1 *ngFor="let lastDay of daysInLastMonth" class="last-month" (click)="goToLastMonth()">
        <ion-label class="dates">
          <span class="date_number other-month-date">{{lastDay.day}}</span>
        </ion-label>

      </ion-col>
      <ion-col col-1 *ngFor="let day of daysInThisMonth" (click)="selectDate(day.day)">


        <ion-label class="dates" *ngIf="currentDate === day.day; else otherDate">
          <span class="date_number currentDate">{{day.day}}</span>
          <!-- <span *ngIf="day.task !=0 " class="date_number" [ngClass]="day.day === day.startdate || day.day === day.duedate ? 'selecteds_dates' : ''">{{day.day}}</span>
          <span *ngIf="day.task ==0 " class="date_number" >{{day.day}}</span> -->

          <div class="dates_slotes" *ngIf="day.gTotal != 0 || day.total_task != 0">
            <span class="cricle" *ngIf="day.gTotal !=undefined && day.gTotal != 0">{{day.gTotal}}</span>
            <span class="squre" *ngIf="day.total_task != 0">{{day.total_task}}</span>
          </div>

          <!-- <div class="selected_dates_slotes"
               [ngClass]="day.day === day.startdate  ? 'first' :day.day === day.duedate ?'last': ''"
               *ngIf="day.day >= day.startdate  || day.day <= day.dayduedate">
            <span></span>
          </div> -->
        </ion-label>
        <ng-template #otherDate class="otherDate">
          <ion-label class="dates">
            <span class="date_number" >{{day.day}}</span>
            <!-- <span *ngIf="day.task !=0 " class="date_number"
                  [ngClass]="day.day === day.startdate || day.day === day.duedate ? 'selecteds_dates' : ''">{{day.day}}</span>
            <span *ngIf="day.task ==0 " class="date_number">{{day.day}}</span> -->

            <div class="dates_slotes" *ngIf="day.gTotal != 0 || day.total_task != 0">
              <span class="cricle" *ngIf="day.gTotal !=undefined && day.gTotal != 0">{{day.gTotal}}</span>
              <span class="squre" *ngIf="day.total_task != 0">{{day.total_task}}</span>
            </div>

           
            <!-- <div *ngIf="day.task !=0 ">
                <div class="selected_dates_slotes" [ngClass]="day.day === getDay(day.taskData[0].startdate) ? 'first' :day.day === getDay(day.taskData[0].duedate) ?'last': ''"
                    *ngIf="day.day >= getDay(day.taskData[0].startdate) && day.day <=getDay(day.taskData[0].duedate)">
                  <span></span>
                </div>
              </div> -->


            <!-- <div *ngIf="day.task !=0 "> -->
            <!-- <div class="selected_dates_slotes"
                 [ngClass]="day.day === day.startdate  ? 'first' :day.day === day.duedate ?'last': ''"
                 *ngIf="day.day >= day.startdate  || day.day <= day.dayduedate">
              <span></span>
            </div> -->
            <!-- </div> -->
          </ion-label>
          <!-- <div class="event-bullet" *ngIf="checkEvent(day.day)"></div> -->
        </ng-template>
      </ion-col>
      <ion-col col-1 *ngFor="let nextDay of daysInNextMonth" class="next-month" (click)="goToNextMonth()">
        <ion-label class="dates">
          <span class="date_number other-month-date">{{nextDay.day}}</span>
        </ion-label>
      </ion-col>
    </ion-row>
  </ion-grid>
</div>

<div class="selected-event" *ngIf="isSelected">
  <ion-list>
    <ion-item *ngFor="let se of selectedEvent">

      <h2>{{se.title}}</h2>
      <h3>{{se.message}}</h3>
      <p>Start Date: {{se.startDate}}<br>
        Start Date: {{se.endDate}}</p>
    </ion-item>
  </ion-list>
</div>